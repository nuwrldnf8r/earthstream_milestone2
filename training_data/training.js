import { HttpAgent, Actor } from '@dfinity/agent';
import fetch from 'cross-fetch';

const canisterId = 'cts3n-5aaaa-aaaak-amt7q-cai'
const idlFactory = ({ IDL }) => {
    const Range = IDL.Record({ 'low' : IDL.Float32, 'high' : IDL.Float32 });
    const Species = IDL.Record({
      'spec_ent_avg' : IDL.Float32,
      'freq_range' : Range,
      'score' : IDL.Float32,
      'samples' : IDL.Nat64,
      'species' : IDL.Text,
    });
    const SpeciesWithId = IDL.Record({
      'id' : IDL.Nat64,
      'score' : IDL.Float32,
      'species' : IDL.Text,
    });
    const PacketScore = IDL.Record({ 'id' : IDL.Nat64, 'score' : IDL.Float32 });
    const Weight = IDL.Record({
      'matching_freq_score' : IDL.Float32,
      'loudest_score' : IDL.Float32,
      'freq_spec_compare_c' : IDL.Float32,
      'freq_range' : IDL.Float32,
      'freq_range_score' : IDL.Float32,
      'loudest_freq' : IDL.Float32,
      'matching_freq' : IDL.Float32,
      'loudest_spec_ent' : IDL.Float32,
      'loudest_harmonic' : IDL.Float32,
      'freq_range_compare_c' : IDL.Float32,
      'matching_freq_spec_ent' : IDL.Float32,
      'freq_compare_c' : IDL.Float32,
      'matching_freq_harmonic' : IDL.Float32,
    });
    const label = IDL.Text;
    const bird_data = IDL.Text;
    return IDL.Service({
      'compare' : IDL.Func([IDL.Nat64, IDL.Nat64], [IDL.Float32], ['query']),
      'find_species' : IDL.Func([IDL.Nat64], [Species], ['query']),
      'get_all_data' : IDL.Func([], [IDL.Vec(IDL.Nat64)], ['query']),
      'get_data_past_5min' : IDL.Func([], [IDL.Vec(SpeciesWithId)], ['query']),
      'get_data_past_hour' : IDL.Func([], [IDL.Vec(SpeciesWithId)], ['query']),
      'get_id' : IDL.Func([IDL.Text], [IDL.Nat64], ['query']),
      'get_owner' : IDL.Func([IDL.Nat64], [IDL.Text], ['query']),
      'get_similar' : IDL.Func([IDL.Nat64], [IDL.Vec(PacketScore)], ['query']),
      'get_weights' : IDL.Func([], [Weight], ['query']),
      'label_bird_data' : IDL.Func([IDL.Nat64, label], [], []),
      'receive_bird_data' : IDL.Func([bird_data], [], ['oneway']),
      'receive_training_data' : IDL.Func([bird_data, label], [], ['oneway']),
      'set_weights' : IDL.Func(
          [
            IDL.Float32,
            IDL.Float32,
            IDL.Float32,
            IDL.Float32,
            IDL.Float32,
            IDL.Float32,
            IDL.Float32,
            IDL.Float32,
            IDL.Float32,
            IDL.Float32,
            IDL.Float32,
            IDL.Float32,
            IDL.Float32,
          ],
          [],
          ['oneway'],
        ),
    });
  };

let training_data = [{"label":"Human","data":[
    "03bde4aa186929f71a969186ea3ce87c0d13c84a8872069bb6e219b1fdb3a6d8788b757a7076991f80c9071e10e3226c2af4cd4178154e174d8d3f8ab417b9199de80100002fa7dbcc3af6b94d00000044ac44942990448436053c03400b000044ac446a22ad44146fb83a05001700c07fa144000b2d44ecd4343a07c02200c07fa1442dff27448478cc3907802e0080bb9644262844448710ae3907003a00c07fa1440f2c664494aab23a038045000044ac4450c7b044320de43b014051000044ac444d88a544080a723c01405c004008b74402ae9b4443b0033c0120ae0080bb96445d68374558aaa73a0100b90080bb96449b68b8456b8f013a0100c50080bb96440d7af845cf4b483a0100d10040f78b44d87ad544db6cdc390100dc0040f78b442241b145e5907c390100e80040f78b4437a597459e4a443a0100f30040f78b4495509444dda4083c0100ff0040f78b44b9af1544e3d7dc3b61000b0140f78b448a33d2447891d33a0100220140f78b447990cf437c1aaf3c65002d0140f78b44e04cf044fd91323c0100390140f78b44c2c50045d3fad83b0100450140f78b4425b13a454322083b0100500140f78b441edd3c45725e173b01005c01003381440c633944b9e6873a850067010033814447e5c344d0dd543a0100730100338144552d3a4490b9bf3b0100c401003381448dc7464426ca763b8900d00140f78b449debee4401052b3c0300dc0100338144fd7354440411073d9d00f30100338144833e1545a6a3e83b030044933ff0fbf8de694961a42c6967c0551cc18223724506b02145b4d8ffbf3d0f61dd4f378dae086d01733d39c1b5d832e817a6c0802043d97a61cd097299b899",
    "03bde4aa186929f71a969186ea3ce87c0d13c84a8872069bb6e219b1fdb3a6d8788b757a7076991f80c9071e10e3226c2af4cd4178154e174d8d3f8ab417b9199d980000002fa7dbccd5af094f0000003381445802e9443b7be03b03001701003381447eb6f5450b4b793a0100220140f78b44da899245feaa593b010045014008b744e0a4e0448781043c0120510180ccc144d296c744a072833c0100d00180bb9644fdd4f1442987423b0300dc0180bb96442b9a144512e6b93b0300e70180bb96448bce1245c4e8973b0100f30180bb9644e00abf442d8ec93b0300ffb0b10eea7b4cdb208999e6a7adf3f32601024a74b4c78c7170618e453c0887619242e312cd22739e2a57b058dfa847679434447c3ac35fe2ea8c7a26bd770f",
    "03bde4aa186929f71a969186ea3ce87c0d13c84a8872069bb6e219b1fdb3a6d8788b757a7076991f80c9071e10e3226c2af4cd4178154e174d8d3f8ab417b9199df80000002fa7dbcc09a6454e00004008b744cd62cc44a1e3083b03200b004008b744fd2d3d46ea3ac439012017000044ac44d66d834410b4253b01402e0080ccc144667e1d45490fb53b010068004008b744bbb981458a976a3b012074000044ac4471da6745e1789239014080000044ac445313bd45c994893901408b000044ac44e3ff49468b4e303901409700c07fa1445b8a994478e71d390780a20080bb964476f31c4483e7c93b5b08ae000044ac44b0356845173d023b0140ba000044ac448f8d27456e7d043b0140c5000044ac444a680245049da93b0140e8000044ac443bb11d44a8edf23c01408b014008b7443cdabb44790f183c0120deeac15217ceb50a9e271b518d83b9897181d3afc7c728e5cca186ae9ffbfcdb04db61bc61cd4f0273b92cfeb05050ad0c20b888f7530d3b5c2178de5f8476e1",
    "03bde4aa186929f71a969186ea3ce87c0d13c84a8872069bb6e219b1fdb3a6d8788b757a7076991f80c9071e10e3226c2af4cd4178154e174d8d3f8ab417b9199d680200002fa7dbccea1d6f4f000040f78b44a391c24382a64f3bdb010b0040f78b44da88f345b9a176390100170040f78b4489258546626831390100220040f78b442139934616289b3901002e0000338144a6fe504507fad43903003a0000338144a0dd1b455741753a030045000033814456c9eb44b151b13a0100510000338144008dcc45cf121b3a03005d0000338144acc76e46823e2e390100740000338144dc4e4345568f363b01007f0040f78b4404b971453225053b0100b90000338144860ada44144f0b3c0300c5000033814463644e440209a63a0700d10000338144d4df95441918543a0100dc0000338144eb577345539cb9390100e80000338144d2c3c245467d4e390100f30000338144c1daa545680a90390100ff0000338144e088334612ec283901001601003381442fac1a46d013783c0d002201003381444544f245206adc3c0d002d010033814441b3b8447261473d7fd0390140f78b4459d71c4560cb533d3f80450100338144e38bc4442f674a3d7f41500180bb9644ef1bc4443ee1203d3b805c0100338144e3a79144c18d1d3d7f916801003381445570ae453db9643c0d00730100338144ee60b2458cb6523c0f007f010033814482262d45d2e4233d0d00960100338144cbc5cb449840433d0f80a201003381445f4f0145ec6dde3c0f80ad010033814445e8554567544d3c09000a0280bb964400c22d45b29ffc3a0100160280bb9644265342452156ef390100210240f78b4498780144169dc439cf002d0280bb964413e21046cea293390100390240f78b446b1d5d447d2f913983005b02c07fa144599ea94557b66c3b0180670280ccc1448e9a6745996b053d03004f3878e89442d41df860e86ac711e4d02af1c2b817b65bb7f73fe1ec47f8973cb10c96f7f3a19247ea0c23eb8d6efd3d74e0437e615ee8e507c25a57e970be67"
    ]},
    {"label":"Cinnyris chalybeus","data":[
    "03bde4aa186929f71a969186ea3ce87c0d13c84a8872069bb6e219b1fdb3a6d8788b757a7076991f80c9071e10e3226c2af4cd4178154e174d8d3f8ab417b9199d580400002fa7dbcc4255654d0000607b67454f6e7c44c7af483b11000c0020b75c453566e0442666ba3c1100170020b75c4566b8df447d97c63b0700230040196245e31aba44aab0623c1b002f00400837457fa2ad4450dc5d3c37003a00606a3c4594664b44fe6ecd3b37004600606a3c451aa5bf4339e9ae3b3f0051000055574599b9ec43073ece3b1f005d00a02e4745a1cba343e948003c3f006900a01d1c45319b8d43f4dc1b3cff007400c0a1f744c07589435c67413cff03800000442c45d0334a436c5ed63b7f008b00a02e474567cb8843ca877a3c3f00970040083745f7ecb3435492533c3f00a30000442c4533a75a4336698f3b7f00ae00e0e1264547736a437f61d03a7f00ba00e0f251459e4490435cde453b1f00c50040083745bb70664367f5eb3a3f00d10080bb164578310e439987193bff00dd00606a3c453baf8e4322f8aa3b1f00e800606a3c4550619d438055423c3700f40000555745328e6f43c59cc93a1f0000010055574588848543244e973a1f000b01400837459c0e7b439dd2ad3a3f00170140083745c059bc433386173b3f002201e0e12645fef5ad43414a403c7f002e01e0f25145f426e643ed50703c17003a0120a63145776dad4325437c3c3f004501209506458bb72843ea46e73bef015101e0e12645c1678843221dd53c3f005c0120a63145b5bcab433608943a33006801a03f724593dfa743f928673a0b007401607b674505205b43b182283b1b007f01700a9445a9857843fe25ba3a07008b0120b75c452fe6754326fc493a1f00960120b75c45dccdac431f8b003b1f00a201005557454fc4de43500da5390700ae014008374528724743eb693d3a1f00b901400837457e6530437a90243b3700c501400837458f636643e5251a3a3f00d1014008374532d954430d72ba3b3f00dc0120a631459586584372e4313b3700e80140083745f47d9f436e0e973a1f00f30180bb164562ca6143a4752f3bff00ff012095064564e2974302b14b3b7f000b02c07f21457bfe1543acf3803a7f00160240083745cd8dc343fa52263c3300220220950645b8525843c364843aff012d0220b75c455895df432bbedf3a1b003902209506456230c84344b1af3bff014502e0e126452c6a89438182073c3f005002606a3c4506e28143c686073b33005c02209586454b99a643d551b43a0f006702906c9945d23ce6430ff7573b05007302e0e1264526539443a8a4d9397f007f02c07f214555fb7343e40c0a3c77008a0220958645f37b6b44a7c55d3c0d009602304689452d810f454c828e3a0f00a10220a631454be223438f0c8f3b3f00ad02c07f214592d2094451d6ad3c2700b902a01d1c45befc824330b62b3d6f007e03a03f7245a23c81449c54b63c0100660480bb16455be09c431f7d213cb700720480bb16453483fa4349c7983ca7007d0420a63145cda3b04384982b3c2b00b8040033014550480244e230a93dff01c30440f78b459b356c4485531a3c0700cf04a01d9c45ce530244051db83b0500da04907dc445b8bd9844a616923c0100353e0bfea5448c6eb92e7dd5081375946fd8cfbbc77cb863f0fa5fa5811d91eaf7b1c7eceb4ec4043f87f43e8176546dd61d1c125ce971571c2929ea59156a76",
    "03bde4aa186929f71a969186ea3ce87c0d13c84a8872069bb6e219b1fdb3a6d8788b757a7076991f80c9071e10e3226c2af4cd4178154e174d8d3f8ab417b9199db80500002fa7dbcc18b6584f00004019e245516aee4450c4113c0100230020a63145fd86de445fbc1f3d03002f00c0a177459a6c1a45d5edb73c01003a00c0a177453ab65245d808d43c010046004008374539669e44ceb0d23c1100510000330145a4423044d519aa3c83005d0020a6314597048944f8f5c63c0300690020950645f04b1144572d013d4700740020a63145241fa74490ffef3c03008000c0a17745dfbf2945d4e3003d01009700c0a1774581d78f447a196c3d0100a300c0a17745d2fcd544844c003d0100ae004019e2452873df4446f50e3d0100ba00c07f214541324844047b953d470051011006da45d2dd7944daff913c01008b0110f5ae45807ed64455072d3d05009701906c9945cd4e6b45443c423c0500a201f092a945fe238145cc2e793c0500ae01a01d9c4583c41b458b91393c0700b90180bb96452b04e6442fd6493c0100c501d030a445a44f794423ccd53c0500d101e0e1a645104dbe445381173d0500dc010044ac459ca5a3444006143d0500e801e0e1a6450f18bf445bdd453d0500f301607be74536ba66448623e63d0300ff01a01d9c4585179044a97cc43a07000b02b0ce9e457e61254407469b3c07001602a02ec7452177f1448f96283a01002202b0ce9e45d1333244dca3433b07002d024008b745d8a30d45de4d2e3c01003902b0dfc945eff9c944f627cc3b01004502607be745f3668a44b8f9663b0300500200338145c1f72a4488f7123c0f005c02605991451b8d5f445c040e3d05006702a01d9c459bc0e4446b7e623b05007302906c9945c4058e44c83d973c07007f02b0dfc9452211f744f8b1003c03008a021006da45256b034560ee253c01009602606a3c45d0a54b44a42a213c1700a202701bbf452adb2d446e39983b0100ad020055d7450172af44b2daef3c0300b902c07fa145f82a8e443058333c0500c402b0dfc9451b8676456aa40b3c0100d002c090cc45aec204454c1f483c0100dc02700a944523c7e043f3eb303b0f00e702b0ce9e458bd44a443576d73b0700f302d030a445f6d45d445070ed3b0700fe020044ac4517578c442cbb283b05000a0380bb9645324a604428a0b23b0500160380bb964586ccef440d00593c05002103906c9945c726c144aae0f43a07002d03906c9945b6d0094521d62c3c050038031006da453a75b545a0b2823b01004403907dc44581b0f4443b4a5c3b01005003700a9445201f6c44071e9c3c01005b03a01d9c4592c9d54453c68e3b05006703a01d9c45aac9a644bcd4cc3c07007303a01d9c45a2e59e44e6eb633b07007e03f0a3d445a2e5bf44a152083c03008a03606abc45bcb3a64499d9423c01009503906c99452af79144c49c3c3b0500a103c090cc45f18fc1448f82233b0300ad0350b9b9456008a9440281dc3b0100b8033057b445c69c25453bf3933b0100c403605991453521124472e3643b0900cf0350a88e4542e5e444d484d83c0500db03906c99455ce7ed44c047a03c0500e70380bb9645c9ee03442d36443b0500f20320a631452cce6f44038bdc3b3f00fe03d030a445c94584447856a23c01000904906c9945cccf5144b5a0123b07001504c07fa145c04879444992593c050021040044ac451e7f0a458e28a93b05002c0420a6b1451ee5a34441df973b010038044008b7452fb336457cb2bc3c010043043057b445566342443026913a05004f04606abc45f5db87447bad013c01005b04c090cc450b3beb44224c913a03006604d041cf45ca1da8446c69413c03007204209586452bfb6244d7355a3c0d007e04700a9445511388448aa1943c07008904b0ce9e45c8f78544aea2cb3b0500950450a88e4502db89441808b23b0700a0040044ac4577f3cc44e1d1013b0500ac044008b745deaebd44b6ef253c0100b804906c994582693c44cc82963b0500c304b0ce9e458f52d644f5db473a0100cf04b0ce9e4541f9b944bd524c3c0500da04e0e1a64531228e44c2b7f53b0500e60420a6b145febf62446fe69a3c0500f20450b9b945b8f77f4408271b3d01006b25b7c9cbdf7c575474000067e9b52d9ce69406cbea175935e612e5bdd39f717f206fe2dfa25b439c0c96bf881cd01db1d1f31d6af59d792bef2bab603409a5"
    ]},
    {"label":"Crithagra totta","data":[
    "03bde4aa186929f71a969186ea3ce87c0d13c84a8872069bb6e219b1fdb3a6d8788b757a7076991f80c9071e10e3226c2af4cd4178154e174d8d3f8ab417b9199d680000002fa7dbccbd99a14e0000a02e4745da8c94446fe9063d03005100606a3c45eaa2e64462c2b03c0100ae00607b67451c40b244cb09d93c0100ba0020a631453fdd66444c84bd3c03001601c0a17745da26b244751f0d3d01008b01e0037d456ee13a44cb84263d0100c70e30659b3e7c35c92b1d732521ee3ee42db8defbd8b66b9912dc8f30687bdfb71dc13423b20fb453323ce8e7f53544e96447c686aa3b94e9a2d3b331fd0d8f",
    "03bde4aa186929f71a969186ea3ce87c0d13c84a8872069bb6e219b1fdb3a6d8788b757a7076991f80c9071e10e3226c2af4cd4178154e174d8d3f8ab417b9199d680000002fa7dbcca24e074e0000a03f724581d54b440713a43c0100ba010055574540c753442313cf3c01005c02e0e12645868938443899c33c4100a80b50a88e45ad3551442f2a693d0300b40be0e12645f4362044eef8113d2f00bf0be0e12645e6eafb434e2e893c6700e9b80812eaf289a8811acda825cbc4c2e84dfe5f4434a80c8026e5a583596e991d9f92d11c8f6a2138e41f0f9d1af41314906d52ee580a82a12afc445781b054",
    "03bde4aa186929f71a969186ea3ce87c0d13c84a8872069bb6e219b1fdb3a6d8788b757a7076991f80c9071e10e3226c2af4cd4178154e174d8d3f8ab417b9199d680000002fa7dbccdfdbd74e000050a88e450d87b8452957693a01001800304689457c315445feaeb23b09008000700a9445a1b8fa441bd3533c01008c0030468945b54bbd44d90bf73c0900f40030468945b1dffd448a229a3c09000001c0a17745279ebf44f7f39c3c0100dac6586008a06a0371ef2d45c9e984c50ea6d0c8b07f9990c2d6dbf259788d2c75cc2f793032e2e7095016f0dcdcd2373e117f8f48cc8b216866d7d9c9f14f47",
    "03bde4aa186929f71a969186ea3ce87c0d13c84a8872069bb6e219b1fdb3a6d8788b757a7076991f80c9071e10e3226c2af4cd4178154e174d8d3f8ab417b9199df80000002fa7dbcc145c8c4e000080bb96453f9fb44590a1993b01000b0020958645259bb445f91d8b3b0100170010e4834543b1f3443df6673c0100a2000044ac45d9ca0c4553c7333c0500ae00906c9945978537451584c33b0100b90040f78b45b6c94545aaa03a3b0100c50030468945caed37456136a23b0900d1000033814551fb9444ad69d53c01008a01606abc4514e72345f275323c01009601d030a4453f2fd34550579c3b0100a201700a9445f7ebd845e04c153b0100ad0110e483456f4c5d454095443b0100b901e0037d457c9ef9445191013d0b00dc01700a9445f8587f4487e5433d01001602a01d9c451b9a494577f1413b0100b50ea4fa84159acfed47209b8c8d67f36aa3551fbde830b758ae4d91d21cc7089f94329409a2806c9100fc6653c14f82e34d1628d2d29b1749eb1af4fbe02b34",
    "03bde4aa186929f71a969186ea3ce87c0d13c84a8872069bb6e219b1fdb3a6d8788b757a7076991f80c9071e10e3226c2af4cd4178154e174d8d3f8ab417b9199df80000002fa7dbcc6971614f0000304689452bc155457feb993b01000b00003381453904c9447cb89a3c01001700e0f251459c492a44682b593d01002e00a03f724517087645931c2e3c01003a004019624594240045c8c6573c01004500a03f72454007a645a696553b01005100607b6745d9b427454321ab3b01005d00b0ce9e4544e6e244bad22b3c01007f00c07fa145c3fd9344cd0ed23c01008b00e0e1a6458ccf57451727d53b01009700e0e1a645494b1e45b8ec0d3c0100a200e0e1a64522171c4528a9483c01007f01a02e4745c2e4c844762a663c01009601a03f7245b5648b4434b4b53c0100a201a02e47451c588a442f84a53c0100f9b03d93b80c1e65beddd84567f132b168feeb28875310016e72fd896271c73a08a0a1ee5f5e02c15b3e0e143087e4a78c8da975d597a4cb021ba972e4ce44f7",
    "03bde4aa186929f71a969186ea3ce87c0d13c84a8872069bb6e219b1fdb3a6d8788b757a7076991f80c9071e10e3226c2af4cd4178154e174d8d3f8ab417b9199d380100002fa7dbccc176644f0000c07fa1440d1c9744fa5cfb3c0780460040083745e1392545ff72b93c2100520080cc4145604ddd441f70f33c01005d00c07f2145e064c644bbebcf3c41006900a01d1c45b740a6442e8dd83c0300c600400837451ebacc449a9d9d3c01001701606a3c453a00dc446d4eb83c0100230140f78b448585974429d0eb3c0f002e0180cc4145c4213e45ad98193c21003a0140083745eaeaf8449bc84b3c01005d0140f78b45462e4445ab5a4a3c01006801606a3c4537cfc3443797fe3c0100740120a631459e372245355b8b3c0100ae014008374553c2e344638d8b3b2100ba0180cc4145e4800e4622289b3b0300c501606a3c45ed05d6446a59a33b0100d101606a3c45e84c7e452a321a3b0100dc01400837450fe22b4532dbed3b0100e801400837454813fb44d41f953c0300b7ca64dede67c4f9cd5d8b5b3be61bfbf9e035087d2e7434cdaa721716c7c30f2ae358875b978320d7869036ecc85dfcc25a9349e95cac5037cacf57875b257c"
    ]},
    {"label":"Emberiza capensis capensis","data":[
    "03bde4aa186929f71a969186ea3ce87c0d13c84a8872069bb6e219b1fdb3a6d8788b757a7076991f80c9071e10e3226c2af4cd4178154e174d8d3f8ab417b9199d780000002fa7dbccdc6d1f4f0000e0e1a6454b099b44964a1a3d01009602c07fa144118f8144dcb5323d0b80e802e0e1264550ac914417cc253d03007e030044ac443cf8a74403373b3d0740960340083745aab5c444dadcd63c010038044008b7441a76de44330da93c0330440420a63145388e2245bac5003c0100520e12bf22c20a496e3bdb27d25c35ed257e7c6173295d4cbfd99d8d4fe0fedbfb7dc63dd32a5795819881d03217fa13bc3068b8fb5629dbcff16da19c38c172",
    "03bde4aa186929f71a969186ea3ce87c0d13c84a8872069bb6e219b1fdb3a6d8788b757a7076991f80c9071e10e3226c2af4cd4178154e174d8d3f8ab417b9199df80000002fa7dbcc20c0354e00000055d7441330994464443c3d07005d00606a3c45b9ab9e443a2d263d2100a3000044ac4457691745d3b3c33c03000001c090cc448a893845382d363c01005d01c07fa144d108fc442a19023d0d0068010044ac441cb4e54414f2fd3c0720ba012095064500c1934407fd483d0700c501e0e1a6454c5e3a452deddd3a0500d101401962458d8dba44ba8b5c3b1300dc01e0f25145692101453ae68c3b0300e801e0f251455b3b94443e70b73b1300f40100555745875063459994a03b1100ff01c0904c4589005044b8cea03b17000b020044ac44814f22448ac3663c1f1c1702a03f7245aa0994443507c43c0900cd3ecfc93f9d0f4a707fd664b39865dabe794fc706dbe28050795011da9f0ffa1841eb5847364ec568c4e82c7a35456a667a9abe629cc87e423b7443a74707c4",
    "03bde4aa186929f71a969186ea3ce87c0d13c84a8872069bb6e219b1fdb3a6d8788b757a7076991f80c9071e10e3226c2af4cd4178154e174d8d3f8ab417b9199d680000002fa7dbcc1b82194f000020a631453cf09d447506013e13000c00e0e12645d2f6b644d3be8d3d07002e00c07f2145317707453fd2b03d67003a00e0e126459e1a0045e203ba3d0700460040083745e0310045b7a5c33d21005101c0a1f74446f604457e7d863d03005e7ac5f7efbd17c43b9f41adddac3d2e6a4fe5c50dbf5b0f42a5d1dba0e36cc1d455c9a7271571495478cf325e0c3a8734948820b29e440256d9414918a550ab"
    ]},
    {"label":"Serinus canicollis","data":[
    "03bde4aa186929f71a969186ea3ce87c0d13c84a8872069bb6e219b1fdb3a6d8788b757a7076991f80c9071e10e3226c2af4cd4178154e174d8d3f8ab417b9199d580100002fa7dbcc4aad7b4f0000a03f7245530964447299ce3901000c000033014528b5d743d890eb39d700180010e483450f6e4445bfae803a0100230080bb1645fcca2444a776233b03002f00a01d1c457a52a943c6733a3b5f003a00605911457db6e743aaca7c3c4700af0020a631459da6cb4445e9193d0100e90020a63145543726445b4e673c07008b01005557455edafb447242803c01009701e0f25145afe5b844145f4f3b1100a201c07fa144be29c843bce6ca3b7ff6ae01606a3c4578498b44a2eb743b0300ba01005557456f422a44e486273c0300c50140196245c96d854461e20d3d1100d101606a3c455b498444d471523c2300dc0100330145ee1c3144a73a013c9b00e801c0a17745f9b1e0456bed873b01002202b0ce9e453c4c3744a8290b3d01002e0220950645d083ea43316f4e3dcf003902c07f2145ea30d1432242af3c6f00450240083745d4421044d5c3d73c2300da5ce77db38398da43c3af0d60565f5d88ef63f5c25c0bb3dceefaa93776f4e36ec93f06d631fce469dc8978f2c9b765014840a30a3653ef2f39b8b608eafffb",
    "03bde4aa186929f71a969186ea3ce87c0d13c84a8872069bb6e219b1fdb3a6d8788b757a7076991f80c9071e10e3226c2af4cd4178154e174d8d3f8ab417b9199da80100002fa7dbccaf9b7d4f000020a631450fdabb444537823c0100510080bb9645a03d1d45acaf013c01005d00b0ce9e450031974592e9a23a01006900c07fa1451d8d4a45fe19ef3a01007400e0e1a645c9aacb45c2a9353b01008000a01d9c4564aea1441555c53b01008b000044ac45b9ca6e45d75f513b0500ba000044ac45ee66a94491c8163d0500c500c0904c45f1ad9c44f604d83c0300dd00e0e1a64561ba774406b8e33c0500e80050b9b9458f7540457066903b0100f40080bb9645adbb1d459dc83d3b0100000100338145569c8c445762603c0d000b01606abc454f2531451099533c0100220180dd6c45ccc71d4556fa543c01002e0180dd6c451c3cd3446050113c01003a01e0037d45b838ee44ff60923c01005c0100442c45eaa4374550c0223c41008b0180cc4145b951fa450cb8fa3a0100960180cc4145e7ddd74550c80a3b0100a20180cc414505c40045e3db753c0300ae01e0f2d145708808455e07873b0100b90180cc41453a5c9a441f6f573c0300c501701bbf456dd06c454185833b0100e80180ccc145659b3945762b583c0100ff01d041cf45129a0445649d543c010041a3ecaa2d54b8e0047ad7d48159c1cbd76fce0c4548f8c096686385b17d24d20e6cb8dac057ebcdee2bcb58e52f2510e9ed8b7880aff6e88231d009d9ef35a1",
    "03bde4aa186929f71a969186ea3ce87c0d13c84a8872069bb6e219b1fdb3a6d8788b757a7076991f80c9071e10e3226c2af4cd4178154e174d8d3f8ab417b9199d980000002fa7dbcccef8764e0000b0dfc94585577c445b78ab3c0100460010f5ae4561bc86450ee79c3b0100c500701bbf45d7671545cf70393c0100d10020b75c458457874450cc583c0100dc0080dd6c454802424570b1903b0100f400a03f7245522e09447fc3cf3c09001601209586452bb9184545a9ca3b010022010044ac45c66d10456782ea3b0500390160599145f8b949452e07593b01009857971f21fa402dcb97715dcac3b6f02dd442eebbc2530b5fbd8c7f33a354185d0a434f512b73b59b15f5dd25bf21a05722889772f205f65b73d74391ee344b",
    "03bde4aa186929f71a969186ea3ce87c0d13c84a8872069bb6e219b1fdb3a6d8788b757a7076991f80c9071e10e3226c2af4cd4178154e174d8d3f8ab417b9199d080100002fa7dbcc67af064f0000700a9445e679c744b2ab223b0100fe01a02e474588e373447468dd3c0300f202700a9445cf2e5e45533b9f3b01002c0380bb96458709b4447df49c3c0100430310e48345003d8a454f5fa43901004f0320958645df9a1945384e3e3c01005b0340f78b45a92800462a75343b0100660330468945bfd4fc44e2bbea3a090072033046894505f6b744bd61733a01007e03209586454bd93544e64a783a0900890330468945c75225448f74003a1b00950320958645f6f73844b45150390b00a00350a88e451233c34463a9c53a0100ac03700a9445c6c2d644946ad0390100b80360599145a14779442aa06d3a0900c303c07fa1452c9bb444d35bc23b0100427e35b8c038e829ba4ce983ee43d8efe2e33bd8416fc5ea7c9226f6783f5ef803a980a65b49f61793571d2598f74fed817b06335520158528b90db1d016b14a",
    "03bde4aa186929f71a969186ea3ce87c0d13c84a8872069bb6e219b1fdb3a6d8788b757a7076991f80c9071e10e3226c2af4cd4178154e174d8d3f8ab417b9199db80100002fa7dbcc0650374f0000606abc45f183ea448961603b01002f00a03f7245e5504a44b18a053d09003a00607b6745d13adc458ec15b3a0100460020b75c45d09142451ae21f3b01006900b0dfc94597ea12453e149a3a01007400c090cc457841a045be02d73a01008000c090cc455febe244cffd7f3b01008c00c090cc451ad99e4437ef833c0100ae0080ddec454d8908452f58e13b0100c600d041cf45beee7a4457b4483c0100000120958645da20b54553f2813b01000b014008b745c2cc40454f69d23b05001701c07fa145133aee44ddb6063c01002201e0f2514560458945975e213b0100450180ccc145eaba6d458ecde03a01005d01700a9445f92f5945d077d63b0100680160599145a3963145e49fd93b01007401e0e1a64542bc7b4583a4b03b01007f0110f5ae4599a21445a5951f3c01008b01607b6745a2473b45c34e6e3b0100970180dd6c450c2c2c45f4d1833b0100a201e0037d451731d044abdcf53b0900ae0120958645822ef644cf3a6d3c0100b9010033814503e6c7448625483c0100dc013046894554620c450307723b0900e80180dd6c455d348a45d976163b0100f30120b75c454024d9459742f03a01009f886b1cf4ff132b2400b245a21ac2a5d9f5c5bdba08092c7dbc4bc398bc624b2a6f3157f14a7a79de34c1883957d28044dd8e4da757a8ac57ef4ae69b38857b",
    "03bde4aa186929f71a969186ea3ce87c0d13c84a8872069bb6e219b1fdb3a6d8788b757a7076991f80c9071e10e3226c2af4cd4178154e174d8d3f8ab417b9199db80100002fa7dbcc0650374f0000606abc45f183ea448961603b01002f00a03f7245e5504a44b18a053d09003a00607b6745d13adc458ec15b3a0100460020b75c45d09142451ae21f3b01006900b0dfc94597ea12453e149a3a01007400c090cc457841a045be02d73a01008000c090cc455febe244cffd7f3b01008c00c090cc451ad99e4437ef833c0100ae0080ddec454d8908452f58e13b0100c600d041cf45beee7a4457b4483c0100000120958645da20b54553f2813b01000b014008b745c2cc40454f69d23b05001701c07fa145133aee44ddb6063c01002201e0f2514560458945975e213b0100450180ccc145eaba6d458ecde03a01005d01700a9445f92f5945d077d63b0100680160599145a3963145e49fd93b01007401e0e1a64542bc7b4583a4b03b01007f0110f5ae4599a21445a5951f3c01008b01607b6745a2473b45c34e6e3b0100970180dd6c450c2c2c45f4d1833b0100a201e0037d451731d044abdcf53b0900ae0120958645822ef644cf3a6d3c0100b9010033814503e6c7448625483c0100dc013046894554620c450307723b0900e80180dd6c455d348a45d976163b0100f30120b75c454024d9459742f03a01009f886b1cf4ff132b2400b245a21ac2a5d9f5c5bdba08092c7dbc4bc398bc624b2a6f3157f14a7a79de34c1883957d28044dd8e4da757a8ac57ef4ae69b38857b"
    ]},
    {"label":"Crithagra scotops umbrosa","data":[
    "03bde4aa186929f71a969186ea3ce87c0d13c84a8872069bb6e219b1fdb3a6d8788b757a7076991f80c9071e10e3226c2af4cd4178154e174d8d3f8ab417b9199d680000002fa7dbcc3231324f000020958645ef1b114537b5603c01002200700a94457739fd449af0873c01007f00a02e4745e601ea4493ef103c0100c500607be745760e6a458e9bbc3b03002d0180cc4145be1c454543051f3d01003901700a9445f9119f459877923b01000f41f33f5c0178d3471e81c562e1fd4c0598c6b950ec66b8757e67e819d9b645c28a2853983179fa0b9faf477e3fcbc69346dfafc971a3576c2bdb066240ba3e",
    "03bde4aa186929f71a969186ea3ce87c0d13c84a8872069bb6e219b1fdb3a6d8788b757a7076991f80c9071e10e3226c2af4cd4178154e174d8d3f8ab417b9199da80000002fa7dbcc53077a4f00004019e245733670440f09373b03000c0040f78b441831da43daa9933be55c5d01c0904c4596c5be43163d823a1f006801606a3c451b0ab0436884aa3a170074011006da45ba875344bd6d4f3a03007f01f0a3d445a97984440a4e533c0300d101c0904c458a56e943b95ae13b1f00dc0120a6b14515e771443c244b3a0100e80110f5ae45ea2d3c4453f6843b0100f401b0dfc9453629d5443fb6a93b0100ca2f218c549dc4f7d4f8996411665ca566081c098c9d271f9150d691cc2e95faffd71de9f8d21f9abc8603a7c3e0bb4f829c2b4050e578185e9c373096e14209",
    "03bde4aa186929f71a969186ea3ce87c0d13c84a8872069bb6e219b1fdb3a6d8788b757a7076991f80c9071e10e3226c2af4cd4178154e174d8d3f8ab417b9199d280300002fa7dbcc23ee1b4f0000606abc45101c8b44100f473b05000c004008b745cd963a44f22cd5390100180020a6b14567de42449d70f2380100230020a6b14562ec1d44d7824c3a01002f004008b745e059a844f9ce573b01003a00607be745331f83447e7a073b01004600700a9445286a1d44ec3d6b3a0500520050a88e45bcd318442388bc3a07005d00b0ce9e454099d1434ef65f3c070069003057b445cbd06e4472ce7d3c010074000044ac45a394bf43ea89283c05008000605991453cb8b243bd7b223a07008c0040f78b45dd5958446cd1a53903009700700a9445bebc2f4442a53f3a0100a300906c994594916744594e023a0500af0020a6b1456cee06443c97873a0500ba00a01d9c458b88f143899131390700c6003046894573b68043ee5fc4380f00d10080bb96449472ad4396eaec3bffffdd0010f5ae45ab608e43fa758f3b0100170160599145fc695545cd738d3a0100230140f78b451265c3446a47dc3b01002e0120a631455cb0c643bec9713a27003a0110e4834575ebff4340108e390d00450180dd6c45fea5fe438e4fa33b0f005101e0037d451edaf244db93843b01005d01c0a17745e4b1a8440c40b23a01007401a01d9c45063812442eb9fe3c05008001e0037d4545098f43447e96390f008b0140f78b4543fa03441561ba3901009701a03f72457198b3438620273c1f00a201c0904c450e166044db19193b0100ae0180cc4145a02199435f2a3d3c2f00dc01907dc44515a65144cfd8b83b0100e801f0a3d445fa2b354414e7763a0100f4014008b745c7709143453af03a0500ff01e0f2d145fe79604453d5b63901000b024008b7453a9a5944f06bc53a0100160200338145218332434151ff3b07002e0220a6314510118e43912d6d3c3f003902a02e4745881baf449046153c1300450280dd6c4595dc4f44440fa43a0100500220a6b14538f7104493749f3b0300680240f78b45076acd43e348ba3a03007302e0f251453a0919446616a93c01008b0250a88e45976cc2449f04bf3b01009602a03f72455c31cb448a74233b0100ad0280bb164584ba904336b0093c7f00d00220a63145faa18b44fb7d8e3c1100e70250a88e452486ac4493e56f3b0100d94015718d10d093bc735ee38f2bc307d0ab3f4d590f6f82797fcb688104b2e885a3503f778bdbd258d82ecfe402d618949cfdaa691a27113c879f933c884e02",
    "03bde4aa186929f71a969186ea3ce87c0d13c84a8872069bb6e219b1fdb3a6d8788b757a7076991f80c9071e10e3226c2af4cd4178154e174d8d3f8ab417b9199d980000002fa7dbcc2d8cde4c000080cc41459bf7e6440deb903b210023000055d745036c4645e737863b03002f0080ccc1451e8057457ce78a3c0100ae0080cc4145a5199f44cc04a53c0100d10040083745d59df644efdb193c01000b01f0a3d445ce66a34583ef663c01007f01f0a3d445e1b6b44508ae963b0100c501400837451a3c914542597c3b0100d101606a3c453fee2b458a4de13b0100d8320038595de27b49d0b478abbf713cd4269f2cf02eb9830a51d79f197932ea2f812b60be79291551ba572989d8648fc02fe6c5e55ce8cb0d1699eeb5c2b4e7",
    "03bde4aa186929f71a969186ea3ce87c0d13c84a8872069bb6e219b1fdb3a6d8788b757a7076991f80c9071e10e3226c2af4cd4178154e174d8d3f8ab417b9199d280200002fa7dbcc74e9234e0000c090cc45feded5457272bd3a01000b00701bbf457b0928447c77643b01001700907dc445cb366d452784cd3b01007400700a94453cbb4445bc80043c01007f0060599145396bc4457c10233b01008b0010e483453a3b2a46a29bcc3901009600e0037d45753d0445609e633a0100a200c0a1774521472245a1ed873a0100ae00c0a177451605cc45dee26f3b0100b900a03f7245bfe2a944446a6d3c0100dc000044ac4583513045905fd43b0500e800606a3c45b57dfa4324bb6b3b0900f30050a88e4511480145d8d58b390100ff00400837450fa5404418d93b3c7b000b0150a88e45125e16453815ba3b01001601a01d1c45e558ee44dea2953b0300220100338145f844084510f4643b01002d0110e48345abdc424588a8af3a01003901003381459607604504af933b01004501c0a17745a41f0245126d743b09005001907dc445a3951345f5f9143b01005c0180ccc145b87844447c619b3a01006701700a94459a57c644d1b53d3b01007301c090cc4517122d45d1863f3b01007f01f0a3d4455caee9442852413c01008a011006da4578855c451ce0313c010096010055d745a7ff13459722f93b0100a1014019e24594c6ee446bc5253c0300ad0150cae445d850f944da898f3c0300fe0180cc4145d06dab45ed65943b01001602606a3c453fbbae442a5f673b0b002102a02e474592ba5745fbd8243c01002d02606a3c45ee8f2b4508740c3c0300380280cc414551f76e45a9f23b3c010010bcc7bb39f79b2e5a834bc3b2f9f4ec7fb3424d58992a68677f59588ae753e8aec841ad9745f86929ff830375e617dfad58bed637bd285eb37bd6499dabe79b"
    ]}]

// Create the HttpAgent to connect to the IC network
const agent = new HttpAgent({ fetch, host: 'https://ic0.app' });

// Create an Actor to interact with the canister using the generated IDL
const actor = Actor.createActor(idlFactory, { agent, canisterId });

async function sendTrainingData(data,label) {
    
    try {
        console.log(`Sending data for label: ${label}`);
        await actor.receive_training_data(data, label);
        console.log(`Successfully sent data`);
    } catch (err) {
        console.error(`Error sending data`, err);
    }
}

async function run() {
    let ar = []
    for(let i=0;i<training_data.length;i++){
        for(let j=0;j<training_data[i].data.length;j++){
            await sendTrainingData(training_data[i].data[j], training_data[i].label)
        }
    }
}

run().then()
